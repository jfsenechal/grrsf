language: php

php:
  - '7.3'

dist: xenial

env:
  - DB=sqlite
  - DB=mysql

before_install:
 - composer self-update

# Start mysql service
services:
 - mysql

install:
  - rm composer.lock
  - travis_retry composer update --prefer-dist

script: vendor/bin/simple-phpunit tests/

# Cache composer packages so "composer install" is faster
cache:
  directories:
    - $HOME/.composer/cache