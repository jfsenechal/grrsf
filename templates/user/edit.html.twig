{% extends '@grr_front/layout_front.html.twig' %}

{% block title %}Edit User{% endblock %}

{% block body %}
    <h1>Edit User</h1>

    {{ include('user/_form.html.twig', {'button_label': 'Update'}) }}

    <br/>
    <a href="{{ path('grr_user_show') }}"><i
                class="fas fa-arrow-left"></i> {{ 'form.btn.cancel'|trans({}, 'actions') }}</a>

    {{ include('user/_delete_form.html.twig') }}
{% endblock %}
{% block scripts %}
    <script>
        /**
         * Met ajour la liste des rooms
         */
        $(document).ready(function () {
            var $locationSelect = $('#area_menu_select_area');
            var $specificLocationTarget = $('#area_menu_select_room');

            $locationSelect.on('change', function (e) {
                console.log("coucou");
                $.ajax({
                    url: '{{ path('grr_ajax_getrooms') }}',
                    data: {
                        id: $locationSelect.val()
                    },
                    success: function (html) {
                        if (!html) {
                            $specificLocationTarget.find('select').remove();
                            $specificLocationTarget.addClass('d-none');

                            return;
                        }

                        // Replace the current field and show
                        $specificLocationTarget
                            .html(html)
                            .removeClass('d-none')
                    }
                });
            });
        });
    </script>
{% endblock %}